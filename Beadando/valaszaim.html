<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>V√°laszaim √©s tervem</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">

    <!-- jsPDF CDN -->
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>
<body>

<div class="page">
    <header>
        <h1>V√°laszaim √©s tervem</h1>
        <p>Itt le√≠rod, melyik utat v√°lasztod, mit fogsz tenni, √©s mikor kezded el. A v√©g√©n let√∂ltheted PDF-ben.</p>
    </header>

    <main class="answers-container">

        <!-- 1. k√©rd√©s: munka / egyetem / egyik sem -->
        <section class="no-print">
            <h2 class="form-section-title">1. Melyik utat v√°lasztom most?</h2>

            <div class="form-group">
                <label class="radio-label">
                    <input type="radio" name="valasztott_ut" value="Munka">
                    Munka
                </label>
                <label class="radio-label">
                    <input type="radio" name="valasztott_ut" value="Egyetem">
                    Egyetem
                </label>
                <label class="radio-label">
                    <input type="radio" name="valasztott_ut" value="Egyik sem (otthoni tanul√°s / id≈ët adok magamnak)">
                    Egyik sem
                </label>
            </div>
        </section>

        <!-- 2. k√©rd√©s: ter√ºlet ‚Äì datalist -->
        <section class="no-print">
            <h2 class="form-section-title">2. Milyen ter√ºleten szeretn√©k a legink√°bb sikeres lenni?</h2>

            <div class="form-group">
                <input id="siker_terulet" list="siker-terulet-list" placeholder="pl. programoz√°s, grafika">
                <datalist id="siker-terulet-list">
                    <option value="Programoz√°s / IT"></option>
                    <option value="Grafika / design"></option>
                    <option value="Zene / hangtechnika"></option>
                    <option value="Vide√≥z√°s / YouTube"></option>
                    <option value="V√°llalkoz√°s"></option>
                    <option value="M√©g fogalmam sincs, de nagyot akarok menni"></option>
                    <option value="Egy√©b"></option>
                </datalist>
            </div>
        </section>

        <!-- 3. k√©rd√©s: l√©p√©sek ‚Äì textarea -->
        <section class="no-print">
            <h2 class="form-section-title">3. Ezeket a l√©p√©seket fogom megtenni, hogy sikeres legyek.</h2>

            <div class="form-group">
                <textarea id="lepesek" placeholder="√çrd le konkr√©tan: mit fogsz csin√°lni? (pl. elk√ºld√∂k egy √∂n√©letrajzot, v√©gign√©zek egy leck√©t, felh√≠vok valakit...)"></textarea>
            </div>
        </section>

        <!-- 4. k√©rd√©s: egy soros input -->
        <section class="no-print">
            <h2 class="form-section-title">4. Ma ezt az egy dolgot biztosan megteszem:</h2>

            <div class="form-group">
                <input type="text" id="mai_lepes" placeholder="pl. elk√ºld√∂k egy √∂n√©letrajzot / v√©gign√©zek egy leck√©t">
            </div>
        </section>

        <!-- 5. k√©rd√©s: mikor kezdem el ‚Äì r√°di√≥gombok -->
        <section class="no-print">
            <h2 class="form-section-title">5. Mikor fogom elkezdeni?</h2>

            <div class="form-group">
                <p>V√°lasz: csak az els≈ë opci√≥ lesz val√≥ban v√°laszthat√≥. üòâ</p>

                <label class="radio-label">
                    <input type="radio" name="kezdes" value="Ma" checked>
                    Ma
                </label>

                <label class="radio-label" style="opacity: 0.5;">
                    <input type="radio" name="kezdes" value="Majd holnap" disabled>
                    Majd holnap
                </label>

                <label class="radio-label" style="opacity: 0.5;">
                    <input type="radio" name="kezdes" value="Majd k√©s≈ëbb" disabled>
                    Majd k√©s≈ëbb
                </label>

                <label class="radio-label" style="opacity: 0.5;">
                    <input type="radio" name="kezdes" value="T√∫l f√°radt vagyok üò¥" disabled>
                    T√∫l f√°radt vagyok üò¥
                </label>
            </div>
        </section>

        <!-- 6. k√©rd√©s: fogadalmak ‚Äì checkboxok -->
        <section class="no-print">
            <h2 class="form-section-title">6. Ezt ma beikszeltem magamnak:</h2>

            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="fog1">
                    V√°llalom, hogy nem halogatok feleslegesen.
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="fog2">
                    Elfogadom, hogy a d√∂nt√©seim√©rt √©n vagyok a felel≈ës.
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="fog3">
                    Legal√°bb egy embert megk√©rek, hogy n√©ha r√°k√©rdezzen, haladok-e.
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="fog4">
                    Kijelentem, hogy nem csak az√©rt kelek fel, hogy tov√°bb aludhassak. üò¥
                </label>
            </div>
        </section>

        <!-- 7. sz√≠nv√°laszt√≥ -->
        <section class="no-print">
            <h2 class="form-section-title">7. Milyen sz√≠nben l√°tom most a j√∂v≈ëmet?</h2>

            <div class="form-group">
                <p>A v√°lasztott sz√≠n≈± keret fog megjelenni a profilk√©ped k√∂r√ºl a PDF-ben.</p>
                <input type="color" id="jovo_szin" value="#ff8800">
            </div>
        </section>

        <!-- 8. d√°tumv√°laszt√≥ -->
        <section class="no-print">
            <h2 class="form-section-title">8. Eddig a napig szeretn√©m el√©rni a c√©lom:</h2>

            <div class="form-group">
                <input type="date" id="szerzodes_datum">
            </div>
        </section>

        <!-- Gombok -->
        <section class="no-print" style="margin-top: 20px;">
            <button type="button" id="pdf-button" class="pdf-button">
                V√°laszaim let√∂lt√©se PDF-ben
            </button>

            <button type="button" id="clear-answers" class="pdf-button" style="margin-left:10px;background:#4b5563;">
                V√°laszok t√∂rl√©se
            </button>

            <p class="pdf-help">
                A gomb egy PDF f√°jlt hoz l√©tre a v√°laszaidb√≥l (profilk√©ppel egy√ºtt), √©s let√∂lti a g√©pedre.
            </p>

            <p style="margin-top: 24px;">
                <a href="index.html" style="color:#93c5fd; text-decoration:none;">
                    ‚Üê Vissza a v√°laszt√≥ oldalra
                </a>
            </p>
        </section>

        <!-- csak szerkezet miatt, t√©nylegesen nem haszn√°ljuk -->
        <section id="print-summary" class="print-only"></section>

    </main>
</div>

<script>
    // profilk√©p
    let profileImageDataUrl = null;
    let profileImageRatio = 1; // height / width

    // al√°√≠r√°s k√©p
    let signatureImageDataUrl = null;
    let signatureImageRatio = 1;

    // hex -> RGB seg√©df√ºggv√©ny
    function hexToRgb(hex) {
        if (!hex) return null;
        hex = hex.replace('#', '');
        if (hex.length === 3) {
            hex = hex.split('').map(c => c + c).join('');
        }
        if (hex.length !== 6) return null;
        const num = parseInt(hex, 16);
        return {
            r: (num >> 16) & 255,
            g: (num >> 8) & 255,
            b: num & 255
        };
    }

    // ≈ë / ≈ê -> √∂ / √ñ
    function fixHungarian(text) {
        if (!text) return text;
        return text.replace(/≈ë/g, '√∂').replace(/≈ê/g, '√ñ');
    }

    // d√°tum form√°z√°sa sz√∂veghez
    function formatDateForText(value) {
        if (!value) {
            const d = new Date();
            const y = d.getFullYear();
            const m = String(d.getMonth() + 1).padStart(2, '0');
            const day = String(d.getDate()).padStart(2, '0');
            return y + '.' + m + '.' + day + '.';
        }
        const parts = value.split('-');
        if (parts.length !== 3) return value;
        return parts[0] + '.' + parts[1] + '.' + parts[2] + '.';
    }

    document.addEventListener('DOMContentLoaded', function () {
        // PROFILK√âP EL≈êT√ñLT√âSE
        const imgProfile = new Image();
        imgProfile.src = 'kepek/levi.jpg'; // Levi arck√©pe
        imgProfile.onload = function () {
            const canvas = document.createElement('canvas');
            canvas.width = imgProfile.naturalWidth;
            canvas.height = imgProfile.naturalHeight;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(imgProfile, 0, 0);
            profileImageDataUrl = canvas.toDataURL('image/jpeg');
            profileImageRatio = imgProfile.naturalHeight / imgProfile.naturalWidth;
        };

        // AL√Å√çR√ÅS K√âP EL≈êT√ñLT√âSE
        const imgSign = new Image();
        imgSign.src = 'kepek/alairas.png'; // Levi al√°√≠r√°sa
        imgSign.onload = function () {
            const canvas = document.createElement('canvas');
            canvas.width = imgSign.naturalWidth;
            canvas.height = imgSign.naturalHeight;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(imgSign, 0, 0);
            signatureImageDataUrl = canvas.toDataURL('image/png');
            signatureImageRatio = imgSign.naturalHeight / imgSign.naturalWidth;
        };

        // d√°tum input alap√©rt√©k: mai nap
        const dateInput = document.getElementById('szerzodes_datum');
        if (dateInput && !dateInput.value) {
            const d = new Date();
            const y = d.getFullYear();
            const m = String(d.getMonth() + 1).padStart(2, '0');
            const day = String(d.getDate()).padStart(2, '0');
            dateInput.value = y + '-' + m + '-' + day;
        }

        // PDF GOMB
        var btn = document.getElementById('pdf-button');
        if (!btn) return;

        btn.addEventListener('click', function () {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF({
                orientation: 'p',
                unit: 'mm',
                format: 'a4'
            });

            // alap bet≈±t√≠pus: times (Times New Roman)
            doc.setFont('times', 'normal');

            const pageWidth  = doc.internal.pageSize.getWidth();
            const pageHeight = doc.internal.pageSize.getHeight();
            let y = 20;

            function get(id) {
                var el = document.getElementById(id);
                return el ? el.value : '';
            }

            const chosenColor = document.getElementById('jovo_szin') ? document.getElementById('jovo_szin').value : '#000000';
            const rgbColor = hexToRgb(chosenColor);

            // --- K√âP + N√âV + SZLOGEN K√ñZ√âPEN FEL√úL + SZ√çNES KERET ---
            if (profileImageDataUrl) {
                const imgWidth = 50; // mm
                const imgHeight = imgWidth * profileImageRatio;
                const x = (pageWidth - imgWidth) / 2;
                const topY = 15;

                // keret
                if (rgbColor) {
                    doc.setDrawColor(rgbColor.r, rgbColor.g, rgbColor.b);
                    doc.setLineWidth(2);
                    doc.rect(x - 3, topY - 3, imgWidth + 6, imgHeight + 6);
                }

                // k√©p
                doc.addImage(profileImageDataUrl, 'JPEG', x, topY, imgWidth, imgHeight);

                // n√©v + szlogen (lejjebb, hogy ne √©rjen a kerethez)
                const nameY = topY + imgHeight + 12;
                const taglineY = nameY + 7;

                doc.setFont('times', 'bold');
                doc.setFontSize(13);
                doc.text(fixHungarian('Maros Levente'), pageWidth / 2, nameY, { align: 'center' });

                doc.setFont('times', 'normal');
                doc.setFontSize(11);
                doc.text(fixHungarian('siker√©nek titkai'), pageWidth / 2, taglineY, { align: 'center' });

                y = taglineY + 10;
            } else {
                doc.setFont('times', 'bold');
                doc.setFontSize(13);
                doc.text(fixHungarian('Maros Levente'), pageWidth / 2, 20, { align: 'center' });
                doc.setFont('times', 'normal');
                doc.setFontSize(11);
                doc.text(fixHungarian('siker√©nek titkai'), pageWidth / 2, 27, { align: 'center' });
                y = 40;
            }

            // --- SEG√âDF√úGGV√âNYEK ---

            function addTitle(text) {
                doc.setFont('times', 'bold');
                doc.setFontSize(18);
                doc.text(fixHungarian(text), pageWidth / 2, y, { align: 'center' });
                y += 10;
            }

            function addSection(title, text) {
                if (!text || text.trim() === '') return;

                if (y > 260) {
                    doc.addPage();
                    y = 20;
                }

                doc.setFont('times', 'bold');
                doc.setFontSize(14);
                doc.text(fixHungarian(title), 10, y);
                y += 6;

                doc.setFont('times', 'normal');
                doc.setFontSize(11);

                const maxWidth = 180;
                const safeText = fixHungarian(text);
                const lines = doc.splitTextToSize(safeText, maxWidth);

                lines.forEach(function (line) {
                    if (y > 280) {
                        doc.addPage();
                        y = 20;
                    }
                    doc.text(line, 10, y);
                    y += 5;
                });

                y += 3;
            }

            // --- 1. OLDAL: k√©rd√©sekre adott v√°laszok ---

            addTitle('V√°laszaim √©s tervem');

            const selectedPath = document.querySelector('input[name="valasztott_ut"]:checked');
            if (selectedPath) {
                addSection('Melyik utat v√°lasztom most?', selectedPath.value);
            }

            const sikerTerulet = get('siker_terulet');
            addSection('A ter√ºlet, ahol els≈ësorban sikeres akarok lenni:', sikerTerulet);

            addSection('Ezeket a l√©p√©seket fogom megtenni, hogy sikeres legyek.', get('lepesek'));

            const maiLepes = get('mai_lepes');
            addSection('Ma ezt az egy dolgot biztosan megteszem:', maiLepes);

            const selectedStart = document.querySelector('input[name="kezdes"]:checked');
            if (selectedStart) {
                addSection('Mikor fogom elkezdeni?', selectedStart.value);
            }

            // Fogadalmak (checkboxok)
            const fogadalmak = [];
            if (document.getElementById('fog1')?.checked) fogadalmak.push('V√°llalom, hogy nem halogatok feleslegesen.');
            if (document.getElementById('fog2')?.checked) fogadalmak.push('Elfogadom, hogy a d√∂nt√©seim√©rt √©n vagyok a felel≈ës.');
            if (document.getElementById('fog3')?.checked) fogadalmak.push('Legal√°bb egy embert megk√©rek, hogy n√©ha r√°k√©rdezzen, haladok-e.');
            if (document.getElementById('fog4')?.checked) fogadalmak.push('Kijelentem, hogy nem csak az√©rt kelek fel, hogy tov√°bb aludhassak. üò¥');

            if (fogadalmak.length > 0) {
                const fogText = fogadalmak.map(item => '‚Ä¢ ' + item).join('\n');
                addSection('Ezt ma beikszeltem magamnak:', fogText);
            }

            // Sz√≠n
            if (chosenColor) {
                addSection('Milyen sz√≠nben l√°tom most a j√∂v≈ëmet?', 'A v√°lasztott sz√≠n k√≥dja: ' + chosenColor);
            }

            // --- AL√Å√çR√ÅS BLOKK AZ 1. OLDAL ALJ√ÅN, K√ñZ√âPEN ---

            doc.setPage(1); // biztosan az els≈ë oldalon rajzoljuk

            const bottomMargin = 15;
            const labelText = 'Maros Levente, a legsikeresebb ember al√°√≠r√°sa';

            if (signatureImageDataUrl) {
                const sigWidth  = 70;                       // nagyobb al√°√≠r√°s
                const sigHeight = sigWidth * signatureImageRatio;
                const centerX = pageWidth / 2;

                const bottomTextY = pageHeight - bottomMargin;

                const sigY = bottomTextY - 5 - sigHeight;
                const topTextY = sigY - 6;

                // "A cs√∫cson tali." a k√©p f√∂l√∂tt
                doc.setFont('times', 'bold');
                doc.setFontSize(11);
                doc.text(fixHungarian('A cs√∫cson tali.'), centerX, topTextY, { align: 'center' });

                // al√°√≠r√°s k√©p
                const sigX = centerX - sigWidth / 2;
                doc.addImage(signatureImageDataUrl, 'PNG', sigX, sigY, sigWidth, sigHeight);

                // felirat a k√©p alatt
                doc.setFont('times', 'normal');
                doc.setFontSize(9);
                doc.text(fixHungarian(labelText), centerX, bottomTextY, { align: 'center' });
            } else {
                // ha nincs k√©p, legal√°bb a sz√∂vegek
                doc.setFont('times', 'bold');
                doc.setFontSize(11);
                doc.text(fixHungarian('A cs√∫cson tali.'), pageWidth / 2, pageHeight - 20, { align: 'center' });

                doc.setFont('times', 'normal');
                doc.setFontSize(9);
                doc.text(fixHungarian(labelText), pageWidth / 2, pageHeight - 10, { align: 'center' });
            }

            // --- 2. OLDAL: √∂sszegz≈ë mondat + UT√ìIRAT ---

            doc.addPage();
            let y2 = 25;
            const maxWidth2 = 180;

            const datumValue = document.getElementById('szerzodes_datum')?.value || '';
            const datumSzoveg = formatDateForText(datumValue);
            const maiLepesText = maiLepes || '...';
            const summarySentence =
                `√ân, Maros Levente, ${datumSzoveg} ezt √≠rtam: ` +
                `"Ma ezt az egy dolgot biztosan megteszem: ${maiLepesText}". ` +
                'Ez√©rt lettem sikeres.';

            doc.setFont('times', 'bold');
            doc.setFontSize(13);
            const summaryLines = doc.splitTextToSize(fixHungarian(summarySentence), maxWidth2);
            doc.text(summaryLines, 10, y2);
            y2 += summaryLines.length * 6 + 14;

            // Ut√≥irat c√≠m
            doc.setFont('times', 'bold');
            doc.setFontSize(16);
            doc.text(fixHungarian('Ut√≥irat:'), 10, y2);
            y2 += 12;

            doc.setFont('times', 'normal');
            doc.setFontSize(12);

            // "Kedves Levente," sor
            doc.text(fixHungarian('Kedves Levente,'), 10, y2);
            y2 += 10;

            const para1 =
                'Rem√©lem, hogy ezzel mosolyt csaltam az arcodra. Tudom, hogy sokan nyomnak ezzel T√©ged √©s √©n ezt nem azzal a sz√°nd√©kkal k√©sz√≠tettem, hanem, mint az unoka√∂cs√©m, fontos vagy sz√°momra √©s nagyon √©rt√©kes vagy √©s tele vagy k√©pess√©ggel √©s tehets√©ggel √©s mi hisz√ºnk benned.';
            const lines1 = doc.splitTextToSize(fixHungarian(para1), maxWidth2);
            doc.text(lines1, 10, y2);
            y2 += lines1.length * 6 + 8;

            const para2 =
                'Szeretn√©k nagyon boldog, √°ldott √©s val√≥di sikerekben kar√°csonyt √©s √∫j√©vet k√≠v√°nni sz√°modra ezzel.';
            const lines2 = doc.splitTextToSize(fixHungarian(para2), maxWidth2);
            doc.text(lines2, 10, y2);
            y2 += lines2.length * 6 + 12;

            const blessing1 =
                '√Åldjon meg t√©ged az √ör, √©s ≈ërizzen meg t√©ged! - 4 M√≥zes 6:24';
            const lines3 = doc.splitTextToSize(fixHungarian(blessing1), maxWidth2);
            doc.text(lines3, 10, y2);
            y2 += lines3.length * 6 + 8;

            const blessing2 =
                '‚ÄûB√∂lcs√© teszlek √©s megtan√≠talak t√©ged az √∫tra, amelyen j√°rj; szemeimmel tan√°csollak t√©ged.‚Äù - Zsolt√°rok 32:8';
            const lines4 = doc.splitTextToSize(fixHungarian(blessing2), maxWidth2);
            doc.text(lines4, 10, y2);
            y2 += lines4.length * 6 + 12;

            doc.text(fixHungarian('Szeretettel,'), 10, y2);
            y2 += 8;
            doc.text(fixHungarian('M√°rk unokab√°ty√°d'), 10, y2);

            // --- LET√ñLT√âS ---
            doc.save('valaszaim-maros-levente.pdf');
        });

        // --- V√ÅLASZOK T√ñRL√âSE GOMB ---
        const clearBtn = document.getElementById('clear-answers');
        if (clearBtn) {
            clearBtn.addEventListener('click', function () {
                // egy soros mez≈ëk
                const sikerTer = document.getElementById('siker_terulet');
                if (sikerTer) sikerTer.value = '';

                const maiLepesInput = document.getElementById('mai_lepes');
                if (maiLepesInput) maiLepesInput.value = '';

                // textarea
                const lepesek = document.getElementById('lepesek');
                if (lepesek) lepesek.value = '';

                // √∫tv√°laszt√≥ r√°di√≥k ‚Äì mind kikapcsolva
                document.querySelectorAll('input[name="valasztott_ut"]').forEach(r => r.checked = false);

                // "Mikor kezdem" r√°di√≥k ‚Äì vissza Ma √©rt√©kre
                const kezdesMa = document.querySelector('input[name="kezdes"][value="Ma"]');
                if (kezdesMa) kezdesMa.checked = true;

                // jel√∂l≈ën√©gyzetek
                ['fog1', 'fog2', 'fog3', 'fog4'].forEach(id => {
                    const el = document.getElementById(id);
                    if (el) el.checked = false;
                });

                // sz√≠nv√°laszt√≥ vissza alap√©rt√©kre
                const colorInput = document.getElementById('jovo_szin');
                if (colorInput) colorInput.value = '#ff8800';

                // d√°tum vissza a mai napra
                if (dateInput) {
                    const d = new Date();
                    const y = d.getFullYear();
                    const m = String(d.getMonth() + 1).padStart(2, '0');
                    const day = String(d.getDate()).padStart(2, '0');
                    dateInput.value = `${y}-${m}-${day}`;
                }
            });
        }
    });
</script>

</body>
</html>
